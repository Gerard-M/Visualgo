<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Tree Simulation</title>
    <style>
        * {
            font-family: Helvetica, Arial, Sans-serif;
        }
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background-color: #2d2d2d;
            color: #efe4d1;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        h1{
            align-self: center;
            align-items: start;
            margin-top: 20px;
            letter-spacing: -0.5px;
        }
        canvas {
            background-color: #efe4d1;
            width: 80%;
            height: 60%;
            margin-top: 20px;
            border-radius: 30px;
        }
        button{
            background-color: #efe4d1;
            color: #2d2d2d;
        }
        input {
            outline: #efe4d1 solid 2px;
            background-color: #2d2d2d;
            color: #efe4d1;
        }
        button, input {
            margin-top: 20px;
            padding: 10px 20px;
            border-radius: 15px;
        }
        button:hover{
            background-color: #2980b9;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Binary Search Tree Simulation</h1>
    <div>
        <input type="number" id="node-value" placeholder="Enter node value" />
        <button id="add-node-button">Add Node</button>
    </div>


    <canvas id="tree-canvas" width="800" height="600"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const addNodeButton = document.getElementById('add-node-button');
            const nodeValueInput = document.getElementById('node-value');
            const treeCanvas = document.getElementById('tree-canvas');
            const ctx = treeCanvas.getContext('2d');

            class TreeNode {
                constructor(value, x, y) {
                    this.value = value;
                    this.x = x;
                    this.y = y;
                    this.left = null;
                    this.right = null;
                }
            }

            class BinaryTree {
                constructor() {
                    this.root = null;
                    this.nodes = [];
                }

                addNode(value) {
                    const newNode = new TreeNode(value, treeCanvas.width / 2, 50);
                    if (this.root === null) {
                        this.root = newNode;
                        this.nodes.push(newNode);
                    } else {
                        this.insertNode(this.root, newNode);
                    }
                }

                insertNode(node, newNode, depth = 1) {
                    if (newNode.value < node.value) {
                        if (node.left === null) {
                            newNode.x = node.x - 100 / depth;
                            newNode.y = node.y + 50;
                            node.left = newNode;
                            this.nodes.push(newNode);
                        } else {
                            this.insertNode(node.left, newNode, depth + 1);
                        }
                    } else {
                        if (node.right === null) {
                            newNode.x = node.x + 100 / depth;
                            newNode.y = node.y + 50;
                            node.right = newNode;
                            this.nodes.push(newNode);
                        } else {
                            this.insertNode(node.right, newNode, depth + 1);
                        }
                    }
                }

                drawTree() {
                    const canvasCenterX = treeCanvas.width / 2;
                    const canvasCenterY = treeCanvas.height / 2;
                    const canvasDiagonal = Math.hypot(treeCanvas.width, treeCanvas.height);
                    const nodeCount = this.nodes.length;
                    const radius = Math.max(10, Math.min(30, canvasDiagonal / (2 * Math.sqrt(nodeCount))) / Math.sqrt(nodeCount + 1));
                    
                    ctx.clearRect(0, 0, treeCanvas.width, treeCanvas.height);
                    this.nodes.forEach(node => {
                        ctx.beginPath();
                        ctx.arc(node.x, node.y, radius, 0, 2 * Math.PI);
                        ctx.fillStyle = "#2d2d2d";
                        ctx.fill();
                        ctx.fillStyle = "#efe4d1";
                        ctx.textAlign = "center";
                        ctx.font = `${radius}px Arial`;
                        ctx.fillText(node.value, node.x, node.y + radius / 3);

                        if (node.left) {
                            ctx.moveTo(node.x, node.y + radius);
                            ctx.lineTo(node.left.x, node.left.y + radius);
                            ctx.stroke();
                        }
                        if (node.right) {
                            ctx.moveTo(node.x, node.y + radius);
                            ctx.lineTo(node.right.x, node.right.y + radius);
                            ctx.stroke();
                        }
                    });
                }
            }
            const tree = new BinaryTree();
                addNodeButton.addEventListener('click', () => {
                    const value = parseInt(nodeValueInput.value);
                    if (!isNaN(value)) {
                        tree.addNode(value);
                        animatePop(tree.nodes[tree.nodes.length - 1]);
                        nodeValueInput.value = '';
                    }
                });

                function animatePop(node) {
                    let startRadius = 0;
                    const targetRadius = 20;
                    const animationSteps = 10;
                    const step = (targetRadius - startRadius) / animationSteps;
                    let currentStep = 0;

                    function pop() {
                        if (currentStep < animationSteps) {
                            currentStep++;
                            node.radius = startRadius + step * currentStep;
                            tree.drawTree();
                            requestAnimationFrame(pop);
                        }
                    }
                    pop();
                }
        });
    </script>
</body>
</html>
